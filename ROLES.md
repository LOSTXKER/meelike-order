# 👥 คู่มือตำแหน่งและสิทธิ์การใช้งาน

## 🎯 ภาพรวม Workflow

```
┌──────────────────────────────────────────────────────────────────┐
│  ADMIN            SUPPORT           MANAGER           CEO         │
├──────────────────────────────────────────────────────────────────┤
│  รับเรื่อง        แก้ไขปัญหา        ดูแลทีม          ดูรายงาน    │
│  สร้างเคส         ปิดเคส            อนุมัติ          วิเคราะห์   │
│  แจ้งลูกค้า       อัพเดทสถานะ       มอบหมาย          ตัดสินใจ    │
└──────────────────────────────────────────────────────────────────┘
```

---

## 1️⃣ ADMIN - ผู้ดูแลระบบ & ติดต่อลูกค้า

### 🎯 หน้าที่หลัก
- **รับเรื่องจากลูกค้า** → สร้างเคสในระบบ
- **แจ้งผลการแก้ไขให้ลูกค้า** → คลิก "แจ้งลูกค้าแล้ว" เพื่อปิดเคส
- **จัดการผู้ใช้และตั้งค่าระบบ**

### ✅ สิทธิ์การใช้งาน
| Feature | สิทธิ์ |
|---------|--------|
| สร้างเคส | ✅ สามารถทำได้ |
| แก้ไขเคส | ✅ ทุกเคส |
| ปิดเคส | ✅ คลิก "แจ้งลูกค้าแล้ว" |
| มอบหมายงาน | ✅ ให้ Support/Manager |
| จัดการผู้ใช้ | ✅ เพิ่ม/ลบ/แก้ไข |
| ตั้งค่าระบบ | ✅ ครบทุกอย่าง |
| ดูรายงาน | ✅ ทั้งหมด |

### 📱 การใช้งานตามขั้นตอน
```
1. ลูกค้าแจ้งปัญหาเข้ามา (Line/Phone/Email)
2. Admin สร้างเคส → ระบบ auto-assign ให้ Support
3. รอ Support แก้ไข → เมื่อเป็น "แก้ไขแล้ว"
4. Admin แจ้งลูกค้า → คลิก "แจ้งลูกค้าแล้ว" → ปิดเคส
```

---

## 2️⃣ SUPPORT - ทีมแก้ไขปัญหา

### 🎯 หน้าที่หลัก
- **รับเคสที่ถูก assign** → รับแจ้งเตือนผ่าน Line
- **ตรวจสอบและแก้ไขปัญหา**
- **อัพเดทสถานะเคส** → NEW → INVESTIGATING → FIXING → RESOLVED
- **อัพเดทสถานะ Orders** → PENDING → PROCESSING → COMPLETED/FAILED/REFUNDED

### ✅ สิทธิ์การใช้งาน
| Feature | สิทธิ์ |
|---------|--------|
| สร้างเคส | ❌ ไม่สามารถทำได้ |
| ดูเคสที่ได้รับมอบหมาย | ✅ เฉพาะของตัวเอง |
| แก้ไขเคส | ✅ ที่ได้รับมอบหมาย |
| เปลี่ยนสถานะเคส | ✅ ถึง RESOLVED |
| เปลี่ยนสถานะ Order | ✅ ทุกสถานะ |
| ปิดเคส (CLOSED) | ❌ เฉพาะ Admin |
| จัดการผู้ใช้ | ❌ |
| ตั้งค่าระบบ | ❌ |
| ดูรายงาน | ✅ เฉพาะของตัวเอง |

### 📱 การใช้งานตามขั้นตอน
```
1. ได้รับแจ้งเตือน Line "มีเคสใหม่ถูก assign ให้คุณ"
2. เข้าระบบ → ดู "งานของฉัน"
3. เปลี่ยนสถานะ "กำลังตรวจสอบ"
4. แก้ไขปัญหา → อัพเดทสถานะ Order
5. เมื่อเสร็จสิ้น → เปลี่ยนเป็น "แก้ไขแล้ว" (RESOLVED)
6. Admin จะแจ้งลูกค้า และปิดเคส
```

---

## 3️⃣ MANAGER - ผู้จัดการทีม

### 🎯 หน้าที่หลัก
- **ดูแลและมอบหมายงานให้ทีม**
- **ช่วย Support แก้ไขเคสยาก**
- **ตรวจสอบ SLA และ Workload**
- **อนุมัติการเปลี่ยนแปลงสำคัญ**

### ✅ สิทธิ์การใช้งาน
| Feature | สิทธิ์ |
|---------|--------|
| สร้างเคส | ✅ สามารถทำได้ |
| ดูเคส | ✅ ทุกเคส |
| แก้ไขเคส | ✅ ทุกเคส |
| เปลี่ยนสถานะเคส | ✅ ครบทุกสถานะ |
| เปลี่ยนสถานะ Order | ✅ ทุกสถานะ |
| มอบหมายงาน | ✅ จัดสรรงานได้ |
| จัดการผู้ใช้ | ❌ (เฉพาะ Admin) |
| ตั้งค่า Case Types | ✅ สามารถทำได้ |
| ดูรายงาน | ✅ ของทีมทั้งหมด |

### 📱 การใช้งานตามขั้นตอน
```
1. เช็ค Dashboard → ดู Workload ของทีม
2. จัดสรรงาน → Re-assign เคสให้เหมาะสม
3. ช่วยแก้เคสที่ยาก → เปลี่ยนสถานะได้เอง
4. ตรวจสอบ SLA → แจ้งเตือนเมื่อเคสค้างนาน
5. ดูรายงานประจำวัน/สัปดาห์
```

---

## 4️⃣ CEO - ผู้บริหาร (สิทธิ์เต็ม)

### 🎯 หน้าที่หลัก
- **ดูแลระบบทั้งหมด**
- **วิเคราะห์รายงานและตัดสินใจ**
- **จัดการเคสและทีมได้ทั้งหมด**
- **ตั้งค่าระบบและนโยบาย**

### ✅ สิทธิ์การใช้งาน
| Feature | สิทธิ์ |
|---------|--------|
| สร้างเคส | ✅ สามารถทำได้ |
| ดูเคส | ✅ ทุกเคส |
| แก้ไขเคส | ✅ ทุกเคส |
| เปลี่ยนสถานะ | ✅ ครบทุกสถานะ |
| มอบหมายงาน | ✅ ทุกคน |
| จัดการผู้ใช้ | ✅ เพิ่ม/ลบ/แก้ไข |
| ตั้งค่าระบบ | ✅ ครบทุกอย่าง |
| ดูรายงาน | ✅ ครบทุกรายงาน |
| Export ข้อมูล | ✅ |

### 📱 การใช้งานตามขั้นตอน
```
1. เข้า Dashboard → ดูภาพรวมทั้งหมด
2. ตรวจสอบ Workload → จัดสรรทีม
3. ดูรายงาน → วิเคราะห์และตัดสินใจ
4. ตั้งค่านโยบายและกฎเกณฑ์
```

---

## 🔐 สรุปสิทธิ์แบบเปรียบเทียบ

| Feature | ADMIN | SUPPORT | MANAGER | CEO |
|---------|-------|---------|---------|-----|
| 👀 ดูเคส | ✅ ทั้งหมด | ✅ ที่ได้รับ | ✅ ทั้งหมด | ✅ ทั้งหมด |
| ➕ สร้างเคส | ✅ | ❌ | ✅ | ✅ |
| ✏️ แก้ไขเคส | ✅ | ✅ ของตัวเอง | ✅ ทั้งหมด | ✅ ทั้งหมด |
| 🔄 เปลี่ยนสถานะ | ✅ | ✅ ถึง RESOLVED | ✅ ทั้งหมด | ✅ ทั้งหมด |
| 📦 จัดการ Orders | ✅ | ✅ | ✅ | ✅ |
| 👥 มอบหมายงาน | ✅ | ❌ | ✅ | ✅ |
| ⚙️ ตั้งค่าระบบ | ✅ | ❌ | ✅ บางส่วน | ✅ |
| 👤 จัดการผู้ใช้ | ✅ | ❌ | ❌ | ✅ |
| 📊 รายงาน | ✅ | ✅ ของตัวเอง | ✅ ของทีม | ✅ ทั้งหมด |

---

## 💡 คำแนะนำการใช้งาน

### สำหรับ ADMIN
- ใช้ Dashboard banner สีเหลือง "รอแจ้งลูกค้า" เพื่อติดตามเคสที่ Support แก้แล้ว
- สร้าง Template ข้อความไว้ส่งลูกค้า เพื่อประหยัดเวลา

### สำหรับ SUPPORT
- ใช้ Filter "งานของฉัน" เพื่อดูเคสที่ได้รับมอบหมาย
- อัพเดทสถานะบ่อยๆ เพื่อให้ Admin และลูกค้าทราบความคืบหน้า

### สำหรับ MANAGER
- เช็ค Workload Dashboard เพื่อดูว่าใครมีงานมากเกินไป
- ช่วยจัดสรร Re-assign เคสให้เหมาะสม

### สำหรับ CEO
- ใช้ Reports เพื่อวิเคราะห์ Trend และปรับกลยุทธ์
- มีสิทธิ์เต็มเหมือน Admin เพื่อจัดการในกรณีฉุกเฉิน

---

## 👤 การจัดการผู้ใช้งาน

### ➕ วิธีเพิ่มผู้ใช้ใหม่

1. **เข้าหน้า Settings → Users**
2. **คลิกปุ่ม "+ เพิ่มผู้ใช้"**
3. **กรอกข้อมูล:**
   - **ชื่อ-นามสกุล**: ชื่อเต็มของผู้ใช้
   - **อีเมล**: ใช้สำหรับ Login (ต้องไม่ซ้ำ)
   - **รหัสผ่าน**: ตั้งรหัสผ่านเริ่มต้น (แนะนำให้เปลี่ยนหลัง Login ครั้งแรก)
   - **ตำแหน่ง (Role)**: เลือกตามหน้าที่
     - `ADMIN` - สำหรับผู้รับเรื่องและแจ้งลูกค้า
     - `SUPPORT` - สำหรับทีมแก้ไขปัญหา
     - `MANAGER` - สำหรับผู้จัดการทีม
     - `CEO` - สำหรับผู้บริหาร (สิทธิ์เต็ม)

4. **คลิก "สร้างผู้ใช้"**

### ✏️ การแก้ไข Role

**คุณสามารถเปลี่ยน Role ของผู้ใช้ได้ตลอดเวลา:**

1. ไปที่ **Settings → Users**
2. หา User ที่ต้องการแก้ไข
3. **คลิก Badge Role** (ADMIN/SUPPORT/MANAGER/CEO)
4. **เลือก Role ใหม่** จาก Dropdown
5. ระบบจะบันทึกอัตโนมัติ

**ตัวอย่าง:**
```
Support A (เดิม SUPPORT) → เลื่อนเป็น MANAGER
Manager (เดิม MANAGER) → เลื่อนเป็น CEO
```

### 🔐 การเปลี่ยนรหัสผ่าน

**ผู้ใช้สามารถเปลี่ยนรหัสผ่านเองได้:**
1. คลิกที่ **ชื่อผู้ใช้** มุมขวาบน
2. เลือก **"เปลี่ยนรหัสผ่าน"**
3. กรอกรหัสผ่านเก่าและรหัสผ่านใหม่
4. ยืนยัน

**Admin สามารถรีเซ็ตรหัสผ่านให้ได้:**
1. ไปที่ **Settings → Users**
2. คลิกไอคอน **"รีเซ็ตรหัสผ่าน"** ที่ User นั้น
3. ตั้งรหัสผ่านใหม่
4. แจ้งผู้ใช้ให้เปลี่ยนรหัสผ่านหลัง Login

### 🗑️ การลบผู้ใช้

**⚠️ Hard Delete - ลบถาวร ไม่สามารถกู้คืนได้**

1. ไปที่ **Settings → Users**
2. คลิกไอคอน **ถังขยะ 🗑️**
3. ยืนยันการลบ
4. ระบบจะ:
   - ลบ User ออกจากระบบ
   - ถ้ามีเคสที่ assigned → เปลี่ยนเป็น unassigned
   - เคสจะไม่หาย แต่ไม่มี owner

**หรือ Soft Delete - ปิดใช้งานชั่วคราว:**
1. **ปิด Switch "ใช้งาน"** แทนที่จะลบ
2. User จะ Login ไม่ได้ แต่ข้อมูลยังอยู่
3. เปิดใหม่ได้ตลอดเวลา

### 🛡️ ข้อจำกัดความปลอดภัย

- ❌ **Admin ไม่สามารถลบตัวเองได้**
- ✅ **เฉพาะ ADMIN และ CEO เท่านั้น** ที่จัดการผู้ใช้ได้
- ✅ **User ทั่วไปแก้ไขข้อมูลตัวเองได้** (ชื่อ, อีเมล, รหัสผ่าน)
- ✅ **เปลี่ยน Role ได้ทันที** ไม่ต้องให้ผู้ใช้ Login ใหม่

---

## 🔑 ข้อมูลเข้าสู่ระบบ (Development)

| Role | Email | Password | ใช้สำหรับ |
|------|-------|----------|-----------|
| ADMIN | admin@meelike.com | password123 | รับเรื่อง + แจ้งลูกค้า |
| SUPPORT | support.a@meelike.com | password123 | แก้ไขปัญหา |
| SUPPORT | support.b@meelike.com | password123 | แก้ไขปัญหา |
| MANAGER | manager@meelike.com | password123 | จัดการทีม |

---

## ⚠️ หมายเหตุ
- เปลี่ยนรหัสผ่านหลังติดตั้งทันที
- Admin ไม่สามารถลบบัญชีตัวเองได้
- เคสที่ถูกลบ User จะถูกตั้งค่า ownerId เป็น null

