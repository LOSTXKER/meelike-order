module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},70844,a=>{a.n(a.i(92359))},84254,a=>{"use strict";let b=(0,a.i(1269).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],84254)},9809,a=>{"use strict";var b=a.i(632),c=a.i(96818),d=a.i(73074);function e(a,e,f){let g=(0,d.differenceInMilliseconds)(a,e)/c.millisecondsInMinute;return(0,b.getRoundingMethod)(f?.roundingMethod)(g)}a.s(["differenceInMinutes",()=>e])},93995,a=>{"use strict";a.s(["Table",()=>c,"TableBody",()=>d,"TableCaption",()=>e,"TableCell",()=>f,"TableFooter",()=>g,"TableHead",()=>h,"TableHeader",()=>i,"TableRow",()=>j]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Table() from the server but Table is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","Table"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableBody() from the server but TableBody is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableBody"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableCaption() from the server but TableCaption is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableCaption"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableCell() from the server but TableCell is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableCell"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableFooter() from the server but TableFooter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableFooter"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableHead() from the server but TableHead is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableHead"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableHeader() from the server but TableHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableHeader"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableRow() from the server but TableRow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx <module evaluation>","TableRow")},94603,a=>{"use strict";a.s(["Table",()=>c,"TableBody",()=>d,"TableCaption",()=>e,"TableCell",()=>f,"TableFooter",()=>g,"TableHead",()=>h,"TableHeader",()=>i,"TableRow",()=>j]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Table() from the server but Table is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","Table"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableBody() from the server but TableBody is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableBody"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableCaption() from the server but TableCaption is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableCaption"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableCell() from the server but TableCell is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableCell"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableFooter() from the server but TableFooter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableFooter"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableHead() from the server but TableHead is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableHead"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableHeader() from the server but TableHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableHeader"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call TableRow() from the server but TableRow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/table.tsx","TableRow")},45310,a=>{"use strict";a.i(93995);var b=a.i(94603);a.n(b)},88211,a=>{"use strict";a.s(["CasesFilters",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call CasesFilters() from the server but CasesFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/cases/cases-filters.tsx <module evaluation>","CasesFilters")},1204,a=>{"use strict";a.s(["CasesFilters",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call CasesFilters() from the server but CasesFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/cases/cases-filters.tsx","CasesFilters")},16321,a=>{"use strict";a.i(88211);var b=a.i(1204);a.n(b)},40826,a=>a.a(async(b,c)=>{try{var d=a.i(7997),e=a.i(33952),f=a.i(38904),g=a.i(19637),h=a.i(45310),i=a.i(35330),j=a.i(84254),k=a.i(56603),l=a.i(39138),m=a.i(95936),n=a.i(66518),o=a.i(40686),p=a.i(9809),q=a.i(64377),r=a.i(16321),s=b([n]);[n]=s.then?(await s)():s;let u={NEW:{label:"ใหม่",className:"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800"},INVESTIGATING:{label:"กำลังตรวจสอบ",className:"bg-violet-500/10 text-violet-600 dark:text-violet-400 border-violet-200 dark:border-violet-800"},WAITING_CUSTOMER:{label:"รอลูกค้า",className:"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-200 dark:border-amber-800"},WAITING_PROVIDER:{label:"รอ Provider",className:"bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800"},FIXING:{label:"กำลังแก้ไข",className:"bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 border-cyan-200 dark:border-cyan-800"},RESOLVED:{label:"แก้ไขแล้ว",className:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-200 dark:border-green-800"},CLOSED:{label:"ปิดเคส",className:"bg-gray-500/10 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-800"}},v={CRITICAL:{label:"วิกฤต",dotColor:"bg-red-500"},HIGH:{label:"สูง",dotColor:"bg-orange-500"},NORMAL:{label:"ปกติ",dotColor:"bg-blue-500"},LOW:{label:"ต่ำ",dotColor:"bg-gray-500"}};async function t({searchParams:a}){let b=await a,c=b.status,s=b.severity,t=b.search,w=parseInt(b.page||"1"),x={};c&&"all"!==c&&(x.status=c),s&&"all"!==s&&(x.severity=s),t&&(x.OR=[{caseNumber:{contains:t,mode:"insensitive"}},{title:{contains:t,mode:"insensitive"}},{customerName:{contains:t,mode:"insensitive"}}]);let[y,z]=await Promise.all([n.default.case.findMany({where:x,include:{caseType:{select:{name:!0}},owner:{select:{name:!0}},provider:{select:{name:!0}}},orderBy:[{severity:"asc"},{createdAt:"desc"}],skip:(w-1)*20,take:20}),n.default.case.count({where:x})]),A=Math.ceil(z/20);return(0,d.jsxs)("div",{className:"min-h-screen",children:[(0,d.jsx)(e.Header,{title:"เคสทั้งหมด"}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,d.jsx)(r.CasesFilters,{}),(0,d.jsx)(m.default,{href:"/cases/new",children:(0,d.jsxs)(f.Button,{className:"gap-2",children:[(0,d.jsx)(j.Plus,{className:"h-4 w-4"}),"สร้างเคสใหม่"]})})]}),(0,d.jsx)(i.Card,{children:(0,d.jsxs)(h.Table,{children:[(0,d.jsx)(h.TableHeader,{children:(0,d.jsxs)(h.TableRow,{className:"hover:bg-transparent",children:[(0,d.jsx)(h.TableHead,{className:"w-[140px]",children:"เลขเคส"}),(0,d.jsx)(h.TableHead,{children:"รายละเอียด"}),(0,d.jsx)(h.TableHead,{className:"w-[100px]",children:"ความรุนแรง"}),(0,d.jsx)(h.TableHead,{className:"w-[130px]",children:"สถานะ"}),(0,d.jsx)(h.TableHead,{className:"w-[120px]",children:"ผู้รับผิดชอบ"}),(0,d.jsx)(h.TableHead,{className:"w-[100px]",children:"SLA"}),(0,d.jsx)(h.TableHead,{className:"w-[120px] text-right",children:"สร้างเมื่อ"})]})}),(0,d.jsx)(h.TableBody,{children:0===y.length?(0,d.jsx)(h.TableRow,{children:(0,d.jsx)(h.TableCell,{colSpan:7,className:"h-32 text-center text-muted-foreground",children:"ไม่พบเคส"})}):y.map(a=>{let b=function(a){if(!a)return{text:"-",isUrgent:!1,isMissed:!1};let b=new Date,c=(0,p.differenceInMinutes)(a,b);if(c<0)return{text:`เกิน ${Math.abs(c)} นาที`,isUrgent:!1,isMissed:!0};if(c<15)return{text:`${c} นาที`,isUrgent:!0,isMissed:!1};if(c<60)return{text:`${c} นาที`,isUrgent:!1,isMissed:!1};let d=Math.floor(c/60);return{text:`${d}:${(c%60).toString().padStart(2,"0")} ชม.`,isUrgent:!1,isMissed:!1}}(a.slaDeadline);return(0,d.jsxs)(h.TableRow,{className:"cursor-pointer",children:[(0,d.jsx)(h.TableCell,{className:"font-mono text-sm",children:(0,d.jsx)(m.default,{href:`/cases/${a.id}`,className:"hover:underline",children:a.caseNumber})}),(0,d.jsx)(h.TableCell,{children:(0,d.jsxs)(m.default,{href:`/cases/${a.id}`,className:"block space-y-1",children:[(0,d.jsx)("p",{className:"font-medium hover:underline",children:a.title}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,d.jsx)("span",{children:a.customerName||"ไม่ระบุลูกค้า"}),a.provider&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:"•"}),(0,d.jsx)("span",{children:a.provider.name})]})]})]})}),(0,d.jsx)(h.TableCell,{children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:(0,l.cn)("h-2 w-2 rounded-full",v[a.severity]?.dotColor)}),(0,d.jsx)("span",{className:"text-sm",children:v[a.severity]?.label})]})}),(0,d.jsx)(h.TableCell,{children:(0,d.jsx)(g.Badge,{variant:"outline",className:(0,l.cn)("text-xs font-medium",u[a.status]?.className),children:u[a.status]?.label})}),(0,d.jsx)(h.TableCell,{children:a.owner?(0,d.jsx)("span",{className:"text-sm",children:a.owner.name}):(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:"ยังไม่มี"})}),(0,d.jsx)(h.TableCell,{children:"-"!==b.text&&(0,d.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1 text-sm",b.isMissed&&"text-red-600 dark:text-red-400",b.isUrgent&&!b.isMissed&&"text-amber-600 dark:text-amber-400"),children:[(0,d.jsx)(k.Clock,{className:"h-3.5 w-3.5"}),(0,d.jsx)("span",{children:b.text})]})}),(0,d.jsx)(h.TableCell,{className:"text-right text-sm text-muted-foreground",children:(0,o.formatDistanceToNow)(a.createdAt,{addSuffix:!0,locale:q.th})})]},a.id)})})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["แสดง ",(w-1)*20+1,"-",Math.min(20*w,z)," จาก ",z," เคส"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(f.Button,{variant:"outline",size:"sm",disabled:w<=1,asChild:w>1,children:w>1?(0,d.jsx)(m.default,{href:`/cases?page=${w-1}${c?`&status=${c}`:""}${s?`&severity=${s}`:""}${t?`&search=${t}`:""}`,children:"ก่อนหน้า"}):"ก่อนหน้า"}),(0,d.jsx)(f.Button,{variant:"outline",size:"sm",disabled:w>=A,asChild:w<A,children:w<A?(0,d.jsx)(m.default,{href:`/cases?page=${w+1}${c?`&status=${c}`:""}${s?`&severity=${s}`:""}${t?`&search=${t}`:""}`,children:"ถัดไป"}):"ถัดไป"})]})]})]})]})}a.s(["default",()=>t]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__3c452d6c._.js.map