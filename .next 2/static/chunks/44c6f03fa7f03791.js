(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var s=e.i(43476),a=e.i(75157);function t({className:e,type:t,...r}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>t])},15288,e=>{"use strict";var s=e.i(43476),a=e.i(75157);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function r({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},10204,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(48425),r=a.forwardRef((e,a)=>(0,s.jsx)(t.Primitive.label,{...e,ref:a,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));r.displayName="Label";var i=e.i(75157);function l({className:e,...a}){return(0,s.jsx)(r,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],10204)},99682,e=>{"use strict";var s=e.i(71645);function a(e){let a=s.useRef({value:e,previous:e});return s.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},24687,e=>{"use strict";var s=e.i(43476),a=e.i(75157);function t({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}e.s(["Textarea",()=>t])},31278,e=>{"use strict";var s=e.i(17521);e.s(["Loader2",()=>s.default])},36287,e=>{"use strict";var s=e.i(43476),a=e.i(45872),t=e.i(19455),r=e.i(93479),i=e.i(10204),l=e.i(24687),d=e.i(15288),n=e.i(67489);let c=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=e.i(31278),u=e.i(22016),x=e.i(18566),h=e.i(71645),m=e.i(46696);function p(){let e=(0,x.useRouter)(),[p,v]=(0,h.useState)(!1),[j,g]=(0,h.useState)([]),[b,f]=(0,h.useState)([]),[N,S]=(0,h.useState)(""),[C,y]=(0,h.useState)(""),[I,w]=(0,h.useState)(""),[L,T]=(0,h.useState)("MANUAL"),[A,P]=(0,h.useState)("NORMAL"),[k,M]=(0,h.useState)(""),[R,V]=(0,h.useState)(""),[D,F]=(0,h.useState)(""),[H,O]=(0,h.useState)("");(0,h.useEffect)(()=>{Promise.all([fetch("/api/case-types").then(e=>e.json()),fetch("/api/providers").then(e=>e.json())]).then(([e,s])=>{g(e),f(s.filter(e=>e.isActive))})},[]);let B=async s=>{s.preventDefault(),v(!0);try{let s=await fetch("/api/cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:N,description:C,caseTypeId:I,source:L,severity:A,providerId:k&&"none"!==k?k:void 0,customerName:R||void 0,customerId:D||void 0,customerContact:H||void 0})});if(!s.ok)throw Error("Failed to create case");let a=await s.json();m.toast.success("สร้างเคสเรียบร้อย",{description:`เลขเคส: ${a.caseNumber}`}),e.push(`/cases/${a.id}`)}catch(e){console.error(e),m.toast.error("ไม่สามารถสร้างเคสได้",{description:"กรุณาลองใหม่อีกครั้ง"})}finally{v(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(a.Header,{}),(0,s.jsxs)("div",{className:"p-6 max-w-3xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(u.default,{href:"/cases",children:(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-9 w-9",children:(0,s.jsx)(c,{className:"h-5 w-5"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"สร้างเคสใหม่"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"กรอกข้อมูลเพื่อสร้างเคสติดตามปัญหา"})]})]}),(0,s.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"ข้อมูลเคส"})}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"title",children:"หัวข้อ *"}),(0,s.jsx)(r.Input,{id:"title",placeholder:"ระบุหัวข้อปัญหา",value:N,onChange:e=>S(e.target.value),required:!0,disabled:p})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"description",children:"รายละเอียด"}),(0,s.jsx)(l.Textarea,{id:"description",placeholder:"อธิบายปัญหาโดยละเอียด...",className:"min-h-[120px]",value:C,onChange:e=>y(e.target.value),disabled:p})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{children:"ประเภทเคส *"}),(0,s.jsxs)(n.Select,{value:I,onValueChange:w,required:!0,disabled:p,children:[(0,s.jsx)(n.SelectTrigger,{children:(0,s.jsx)(n.SelectValue,{placeholder:"เลือกประเภท"})}),(0,s.jsx)(n.SelectContent,{children:j.map(e=>(0,s.jsx)(n.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{children:"แหล่งที่มา"}),(0,s.jsxs)(n.Select,{value:L,onValueChange:T,disabled:p,children:[(0,s.jsx)(n.SelectTrigger,{children:(0,s.jsx)(n.SelectValue,{})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"LINE",children:"Line"}),(0,s.jsx)(n.SelectItem,{value:"TICKET",children:"Ticket"}),(0,s.jsx)(n.SelectItem,{value:"API",children:"API"}),(0,s.jsx)(n.SelectItem,{value:"MANUAL",children:"สร้างเอง"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{children:"ความรุนแรง"}),(0,s.jsxs)(n.Select,{value:A,onValueChange:P,disabled:p,children:[(0,s.jsx)(n.SelectTrigger,{children:(0,s.jsx)(n.SelectValue,{})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"CRITICAL",children:"วิกฤต"}),(0,s.jsx)(n.SelectItem,{value:"HIGH",children:"สูง"}),(0,s.jsx)(n.SelectItem,{value:"NORMAL",children:"ปกติ"}),(0,s.jsx)(n.SelectItem,{value:"LOW",children:"ต่ำ"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{children:"Provider"}),(0,s.jsxs)(n.Select,{value:k,onValueChange:M,disabled:p,children:[(0,s.jsx)(n.SelectTrigger,{children:(0,s.jsx)(n.SelectValue,{placeholder:"เลือก Provider (ถ้ามี)"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"none",children:"ไม่ระบุ"}),b.map(e=>(0,s.jsx)(n.SelectItem,{value:e.id,children:e.name},e.id))]})]})]})]})]})]}),(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"ข้อมูลลูกค้า"})}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"customerName",children:"ชื่อลูกค้า"}),(0,s.jsx)(r.Input,{id:"customerName",placeholder:"ชื่อ-นามสกุล",value:R,onChange:e=>V(e.target.value),disabled:p})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"customerId",children:"User ID"}),(0,s.jsx)(r.Input,{id:"customerId",placeholder:"รหัสผู้ใช้ในระบบ",value:D,onChange:e=>F(e.target.value),disabled:p})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"customerContact",children:"ช่องทางติดต่อ"}),(0,s.jsx)(r.Input,{id:"customerContact",placeholder:"Line ID, เบอร์โทร, Email",value:H,onChange:e=>O(e.target.value),disabled:p})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)(u.default,{href:"/cases",children:(0,s.jsx)(t.Button,{variant:"outline",disabled:p,children:"ยกเลิก"})}),(0,s.jsx)(t.Button,{type:"submit",disabled:p||!I||!N,children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"กำลังสร้าง..."]}):"สร้างเคส"})]})]})]})]})}e.s(["default",()=>p],36287)}]);